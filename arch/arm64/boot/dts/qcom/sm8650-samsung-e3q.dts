// SPDX-License-Identifier: BSD-3-Clause
/*
 * Copyright (c) 2024, David Wronek <david@mainlining.org>
 */

/dts-v1/;

#include <dt-bindings/regulator/qcom,rpmh-regulator.h>
#include "sm8650.dtsi"
#include "pm8550.dtsi"
#define PMK8550VE_SID 8
#include "pm8550ve.dtsi"
#include "pm8550vs.dtsi"
#include "pmk8550.dtsi"
#include "pmr735d_a.dtsi"

/delete-node/ &mpss_dsm_mem;
/delete-node/ &mpss_dsm_mem_2;
/delete-node/ &mpss_mem;
/delete-node/ &adspslpi_mem;
/delete-node/ &hwfence_shbuf;
/delete-node/ &rmtfs_mem;

/ {
	model = "Samsung Galaxy S24 Ultra";
	compatible = "samsung,e3q", "qcom,sm8650";

	chosen {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		bootargs = "console=tty0 clk_ignore_unused pd_ignore_unused fw_devlink=permissive";

		framebuffer: framebuffer@d5100000 {
			compatible = "simple-framebuffer";
			reg = <0x0 0xd5100000 0x0 0x2b00000>;
			width = <1440>;
			height = <3120>;
			stride = <(1440 * 4)>;
			format = "a8r8g8b8";
		};
	};

	reserved-memory {
		chipinfo_region@81cf4000 {
			reg = <0x0 0x81cf4000 0x0 0x1000>;
			no-map;
		};

		qlink_logging_region@84800000 {
			reg = <0x0 0x84800000 0x0 0x200000>;
			no-map;
		};

		mpss_dsm_mem: mpss-dsm@86300000 {
			reg = <0x0 0x86300000 0x0 0x4900000>;
			no-map;
		};

		mpss_dsm_mem_2: mpss-dsm-2@8ac00000 {
			reg = <0x0 0x8ac00000 0x0 0x800000>;
			no-map;
		};

		mpss_mem: mpss@8b400000 {
			reg = <0x0 0x8b400000 0x0 0xfc00000>;
			no-map;
		};

		adspslpi_mem: adspslpi@9df00000 {
			reg = <0x0 0x9df00000 0x0 0x5c00000>;
			no-map;
		};

		kaslr_region@b01ff000 {
			reg = <0x0 0xb01ff000 0x0 0x1000>;
			no-map;
		};

		uh_guest_region {
			reg = <0x0 0xb1000000 0x0 0x3600000>;
			no-map;
		};

		uh_heap_region {
			reg = <0x0 0xb0200000 0x0 0x44000>;
			no-map;
		};

		hwfence_shbuf: hwfence-shbuf@d4e23000 {
			reg = <0x0 0xd4e23000 0x0 0x2dd000>;
			no-map;
		};

		/*
		 * The bootloader will only keep display hardware enabled
		 * if this memory region is named exactly 'splash_region'.
		 */
		splash_region {
			reg = <0x0 0xd5100000 0x0 0x2b00000>;
			no-map;
		};

		rmtfs_mem: rmtfs@ea100000 {
			compatible = "qcom,rmtfs-mem";
			reg = <0x0 0xea100000 0x0 0x400000>;
			no-map;

			qcom,client-id = <1>;
			qcom,vmid = <QCOM_SCM_VMID_MSS_MSA>;
		};

		// Remove this when upstreaming
		ramoops@ffe00000 {
			compatible = "ramoops";
			reg = <0 0xffe00000 0 0x200000>;
			console-size = <0x40000>;
			record-size = <0x1000>;
			ecc-size = <16>;
		};

	};
};

&dispcc {
	status = "disabled";
};

&sleep_clk {
	clock-frequency = <32000>;
};

&tlmm {
	gpio-reserved-ranges = <8 4>, <58 2>;
};

&xo_board {
	clock-frequency = <76800000>;
};
